import React, { useMemo, useState } from "react";

/**
 * Signature Payroll — Bilingual Site (v2.3)
 * Fixes:
 *  - Partners logos visible (root path + URL encoding + onError fallback)
 *  - Resources -> Payroll System Support section (6 full cards with tags + expand)
 *  - About merges Leadership; Services = 3-column cards; Success=7; News=4; Testimonials=all (6/page)
 * Style: light gray background, black buttons
 */

/* ======================
   Types
   ====================== */
type StoryMetric = { label: string; value: string };
type StoryItem = { title: string; summary: string; metrics?: StoryMetric[] };
type NewsItem = { date: string; tag: string; title: string; summary: string; bullets?: string[] };
type Testimonial = { quote: string; source: string };

type SystemSupport = {
  title: string;
  intro: string;
  tags: string[];
  items: string[];
};

/* ======================
   Partners (Photos.zip)
   - Use root path "/photos/Photos/..."
   - URL-encode filenames at render time to tolerate spaces/() etc.
   ====================== */
const partnerFiles = [
  "ADP system picture.png",
  "Dayforce system picture.png",
  "Employment hero system picture.png",
  "Ichris system picture.png",
  "Xero system picture.png",
  "MicrOpay system picture.png",
  "Preceda system picture.png",
  "Payroll services picture.jpg",
  "Payroll services pictures.webp",
  "Project services picture.webp",
  "Payroll project service picture .png",  // note trailing space before .png in source
  "Recruitment service picture .png",      // note trailing space before .png in source
  "JH1_6862 (1).jpg",
  "JH1_7003.jpg",
  "JH1_7041.jpg",
  "JH1_7055.jpg",
  "JH1_7063.jpg",
  "JH1_7067.jpg",
  "JH1_7145.jpg",
];

/* ======================
   About + Leadership (from ZIP)
   ====================== */
const aboutEN = [
  "About Signature Payroll Services Pty Ltd (SPS)",
  "SPS acquires and operates your payroll function to deliver long-term service excellence through a specialist provider.",
  "We are a boutique payroll consultancy and outsourcing firm built on precision, discretion, and a commitment to full-function payroll delivery.",
  "We are not transactional processors—we are strategic partners. We deliver with an experienced team, ensuring responsiveness, accuracy, and continuity.",
  "With 45+ years of combined payroll expertise, we provide a premium service experience that goes far beyond basic processing.",
  "Full Ownership of Payroll Operations — We manage the end-to-end payroll lifecycle so you can operate without internal payroll headcount. Our team becomes your team.",
];

const aboutZH = [
  "关于 Signature Payroll Services Pty Ltd (SPS)",
  "SPS 通过专业化团队接管并运行企业的薪资职能，以实现长期、稳定且高质量的服务体验。",
  "我们是一家精品薪资咨询与外包公司，坚持以精准、谨慎与全功能交付为核心。",
  "我们不是事务性处理者，而是战略合作伙伴。资深团队交付，确保响应、准确与连续性。",
  "凭借 45+ 年综合经验，我们提供远高于基础处理的高端服务体验。",
  "全权运营薪资流程——由我们管理端到端生命周期，企业无需配置内部薪资人员。我们的团队就是你的团队。",
];

const leadershipEN = [
  { name: "Kathy De Luca", title: "Senior Executive & Strategic Leader", blurb: "20+ years leading high-performing teams. Known for transforming service delivery and driving organisational excellence." },
  { name: "Vivien Huang", title: "Payroll & Compliance Expert", blurb: "25+ years in Australian payroll legislation, HR operations, and compliance. Trusted mentor and team builder; strong in troubleshooting." },
];

const leadershipZH = [
  { name: "Kathy De Luca", title: "高级管理者与战略领导者", blurb: "20 余年领导高绩效团队经验。擅长重塑服务交付并推动组织卓越。" },
  { name: "Vivien Huang", title: "薪资与合规专家", blurb: "25+ 年澳洲薪资立法、HR 运营与合规经验。值得信赖的导师与团队建设者，技术问题定位与修复能力强。" },
];

/* ======================
   Services (3 cards)
   ====================== */
const servicesEN = [
  {
    title: "Payroll Outsourcing Services",
    subtitle: "Premium, Discreet, Delivered",
    bullets: [
      "Full-function payroll across all pay cycles, awards and employment types",
      "Direct access to senior consultants",
      "Continuous improvement and integrations",
      "Compliance management & audit-ready documentation",
      "24/7 support and monitoring",
    ],
  },
  {
    title: "Payroll Project Consulting",
    subtitle: "Implementation & Optimisation",
    bullets: [
      "Implementations, migrations and upgrades",
      "Compliance reviews & risk assessments",
      "M&A / restructure support",
      "Process & reporting redesign",
      "Change management & capability uplift",
    ],
  },
  {
    title: "Payroll Recruitment",
    subtitle: "Specialised Talent Acquisition",
    bullets: [
      "Hiring for payroll professionals",
      "Contract & permanent placements",
      "Role scoping & cultural fit",
      "Industry network & references",
      "Onboarding support and mentoring",
    ],
  },
];

const servicesZH = [
  {
    title: "薪资外包服务",
    subtitle: "高标准、谨慎、可交付",
    bullets: [
      "覆盖全部支付周期/奖酬/用工类型的全功能薪资",
      "直通资深顾问，减少沟通层级与延迟",
      "持续优化与系统集成/迁移支持",
      "合规管理与审计就绪文档",
      "7×24 小时支持与监控",
    ],
  },
  {
    title: "薪资项目咨询",
    subtitle: "实施落地与优化提升",
    bullets: [
      "系统实施、迁移与升级",
      "合规审查与风险评估",
      "并购/重组期间的支持",
      "流程与报表重构",
      "变更管理与能力提升",
    ],
  },
  {
    title: "薪资招聘",
    subtitle: "薪资领域人才获取",
    bullets: [
      "薪资岗位的专业招聘",
      "合同制与长期岗位",
      "职位定范围与文化契合",
      "行业网络与背调",
      "入职支持与导师辅导",
    ],
  },
];

/* ======================
   Success Stories (7)
   ====================== */
const successEN: StoryItem[] = [
  { title: "Three-Year Government Partnership", summary: "Partnered with a major government department for three years. Built processes, documentation and controls; participated in external audits. Shifted from meeting expectations to setting the benchmark.", metrics: [{ label: "Contract", value: "3 Years" }, { label: "Audit", value: "100% Ready" }, { label: "Compliance", value: "Full" }] },
  { title: "Turning Payroll Chaos into Operational Confidence", summary: "Took over during a crisis. In a month, reviewed end-to-end processes and systems; created troubleshooting playbooks; standardised SOP & documentation; improved configuration.", metrics: [{ label: "Stability", value: "↑" }, { label: "Errors", value: "↓" }, { label: "Efficiency", value: "↑" }] },
  { title: "Streamlining Payroll Across Asia-Pacific", summary: "Standardised payroll processes and controls across APAC, establishing a regional benchmark for governance and reporting.", metrics: [{ label: "Countries", value: "Multi-region" }, { label: "Consistency", value: "High" }] },
  { title: "Cutting Labour Cost Reporting Time from Days to Minutes", summary: "Introduced SQL and automation to reduce labour cost reporting cycle from days to minutes, shifting finance from manual work to decision support.", metrics: [{ label: "Time", value: "Days → Minutes" }, { label: "Value", value: "Decision Support" }] },
  { title: "Automating P&L Variance Monitoring for Real-Time Insights", summary: "Built automated P&L variance monitoring; surfaced anomalies in real time and enabled faster corrective action.", metrics: [{ label: "Visibility", value: "Real-time" }, { label: "Corrections", value: "Faster" }] },
  { title: "Delivering Superstream Compliance for 7,000 Employees", summary: "Independently delivered Superstream compliance at a large insurance organisation for ~7,000 employees, on time and on budget.", metrics: [{ label: "Employees", value: "≈7,000" }, { label: "Delivery", value: "On-time/On-budget" }] },
  { title: "Digitising Timesheets for Speed and Accuracy", summary: "Migrated paper timesheets to a digital platform, significantly improving accuracy, transparency and control.", metrics: [{ label: "Accuracy", value: "↑" }, { label: "Cycle Time", value: "↓" }] },
];

const successZH: StoryItem[] = [
  { title: "三年政府合作项目", summary: "与大型政府部门合作三年，建立流程、文档与内控，参与外部审计；从“满足期望”提升至“树立标杆”。", metrics: [{ label: "合作期", value: "3 年" }, { label: "审计", value: "100% 就绪" }, { label: "合规", value: "全面达标" }] },
  { title: "从混乱到信心的运营蝶变", summary: "在危机期接手，1 个月内审视流程与系统；建立排障手册，标准化作业与文档，优化配置。", metrics: [{ label: "稳定性", value: "提升" }, { label: "错误率", value: "下降" }, { label: "效率", value: "提升" }] },
  { title: "标准化亚太区域薪资运营", summary: "在 APAC 统一流程与控制，树立区域级薪资治理新标杆。", metrics: [{ label: "覆盖", value: "多国家/地区" }, { label: "一致性", value: "高" }] },
  { title: "把劳动成本报表从“几天”压缩到“分钟”", summary: "借助 SQL 与自动化将统计周期从几天缩到分钟，使财务回归决策支持。", metrics: [{ label: "耗时", value: "几天 → 分钟" }, { label: "价值", value: "决策支持" }] },
  { title: "P&L 差异自动监控，实现实时洞察", summary: "搭建自动化差异监控，异常实时可见，更快纠偏。", metrics: [{ label: "可视性", value: "实时" }, { label: "纠偏速度", value: "更快" }] },
  { title: "为约 7,000 名员工交付 Superstream 合规", summary: "在大型保险机构独立部署 Superstream 合规，按期按预算完成。", metrics: [{ label: "员工数", value: "≈7,000" }, { label: "交付", value: "按期/按预算" }] },
  { title: "工时单数字化，速度与准确性双提升", summary: "将纸质工时单迁移至线上平台，显著提升准确性、透明度与可控性。", metrics: [{ label: "准确性", value: "提升" }, { label: "周期", value: "缩短" }] },
];

/* ======================
   News (4)
   ====================== */
const newsEN: NewsItem[] = [
  { date: "25 Sep 2025", tag: "Industry News", title: "ANZ Payroll Email Blunder Sparks Industry-Wide Concern Over Redundancy Communications", summary: "Automated emails mistakenly informed employees of termination before formal communication at ANZ. The incident highlights critical risks in automated HR processes and the need for human oversight.", bullets: ["System safeguards must prevent premature communications.", "Human review is critical for sensitive decisions.", "Clear protocols for redundancy processes are essential."] },
  { date: "20 May 2025", tag: "Technology", title: "AI and Employment: Challenging the Doomsday Narrative", summary: "David Sacks argues that AI fears are overstated. Workers are more likely to lose jobs to AI-proficient colleagues than to AI itself. ‘Agentic AI’ brings productivity opportunities.", bullets: ["Understanding AI tools is now table stakes.", "Upskilling and continuous learning are crucial.", "AI augments rather than replaces human capabilities."] },
  { date: "Aug 2025", tag: "Legislation", title: "Australia’s “Right to Disconnect” Expansion", summary: "Small businesses are now covered. Employees can reasonably refuse after-hours contact. Payroll and HR teams should update protocols and train leaders.", bullets: ["Define ‘reasonable grounds’ for after-hours contact.", "Align on escalation paths for true emergencies.", "Update policy and leadership training."] },
  { date: "Jul 2025", tag: "Compliance", title: "Superannuation Guarantee Rate Changes", summary: "SG rises to 12%. The increase applies by date of payment, not date of work performed. Payroll teams must update systems and verify calculations to avoid underpayment and penalties.", bullets: ["Update SG configuration across systems.", "Verify pro-rating and rounding behaviour.", "Communicate changes to employees and leaders."] },
];

const newsZH: NewsItem[] = [
  { date: "2025-09-25", tag: "行业新闻", title: "ANZ 自动化误发裁员邮件引发行业关注", summary: "ANZ 因自动化系统误发裁员相关邮件而遭质疑。事件凸显 HR 自动化流程的关键风险与必要的人为把关。", bullets: ["设置系统防护，避免过早或错误沟通。", "敏感决策必须有人为复核环节。", "建立清晰的冗余/裁员沟通与审批流程。"] },
  { date: "2025-05-20", tag: "技术", title: "AI 与就业：理性看待“末日论”", summary: "David Sacks 认为 AI 更可能增强人类而非替代；‘Agentic AI’ 释放生产力机会。核心在于提升个人 AI 熟练度与持续学习。", bullets: ["理解与应用 AI 工具已是基础能力。", "持续学习与技能升级至关重要。", "AI 是增效工具而非一刀切的替代。"] },
  { date: "2025-08", tag: "立法", title: "澳洲“下班不被打扰”权利扩展至小企业", summary: "小企业员工同样享有下班后合理拒绝被联系的权利。应更新制度并培训管理者，明确紧急情形与升级路径。", bullets: ["定义“合理拒绝”的判定依据与场景。", "明确紧急事件的上报/升级路径。", "更新政策并培训管理者与团队。"] },
  { date: "2025-07", tag: "合规", title: "养老金保证（SG）上调至 12%", summary: "按支付日期而非工作日期适用。需更新系统并核验计算，避免欠付与处罚，同时向员工与管理者充分告知。", bullets: ["在所有系统中更新 SG 配置。", "核验分摊与四舍五入规则。", "及时对内沟通政策变化与影响。"] },
];

/* ======================
   Testimonials (all; 6/page)
   ====================== */
const testimonialsEN: Testimonial[] = [
  { quote: "Vivien is a trusted advisor—would recommend without hesitation.", source: "Finance Leader, Wealth Management" },
  { quote: "Great asset to our ADP rollout across 17 locations.", source: "Senior Technology Executive, Industrial" },
  { quote: "Led the payroll team with commercial insight and creativity.", source: "Payroll Team Member, Insurance" },
  { quote: "Professional attitude, technical depth, reliable service.", source: "Senior Finance Leader, Corporate" },
  { quote: "Instrumental in rolling out payroll processes across APAC.", source: "Director, Global Consulting" },
  { quote: "Excellent advances in payroll automation—widely valued.", source: "Regional Finance Leader, Maritime" },
  { quote: "Managed APAC payroll across 11 countries—relationships exceptional.", source: "CFO, Technology" },
  { quote: "Kathy’s leadership and discretion—seamless & reassuring.", source: "CFO, Healthcare" },
];

const testimonialsZH: Testimonial[] = [
  { quote: "Vivien 是值得信赖的顾问——毫不犹豫地推荐。", source: "财富管理财务负责人" },
  { quote: "为我们 17 个站点的 ADP 上线做出了关键贡献。", source: "工业行业资深技术主管" },
  { quote: "以商业洞察与创意带领薪资团队前进。", source: "保险行业薪资团队成员" },
  { quote: "专业态度、技术深度、服务可靠。", source: "大型企业资深财务负责人" },
  { quote: "推动 APAC 区域的薪资流程落地与扩展。", source: "全球咨询公司总监" },
  { quote: "在薪资自动化方面进展显著，广受好评。", source: "航运业区域财务负责人" },
  { quote: "管理 11 国 APAC 薪资，关系协调能力出色。", source: "科技行业 CFO" },
  { quote: "Kathy 的领导力与审慎，让合作非常安心顺畅。", source: "医疗行业 CFO" },
];

/* ======================
   Recruitment
   ====================== */
const jobsEN = [
  { role: "Payroll Project Consultant", type: "Full-time / Remote", desc: "Lead payroll implementation and transformation projects." },
  { role: "Payroll Officer", type: "Full-time", desc: "Run payroll accurately and ensure ongoing compliance." },
  { role: "Entry-Level Payroll Assistant", type: "Graduate / Internship", desc: "Support operations and learn from senior consultants." },
];
const jobsZH = [
  { role: "薪资项目顾问", type: "全职 / 远程", desc: "主导薪资实施与转型项目。" },
  { role: "薪资专员", type: "全职", desc: "准确执行薪资并保持持续合规。" },
  { role: "初级薪资助理", type: "毕业生 / 实习", desc: "支持运营并向资深顾问学习。" },
];

/* ======================
   Payroll System Support (Resources 子区块)
   ====================== */
const supportEN: SystemSupport[] = [
  {
    title: "Xero Payroll",
    intro:
      "Top FAQs covering ABA file rejections, super guarantee contributions, STP submissions, leave loading calculations, and award rate issues.",
    tags: ["Bank File Issues", "Super Compliance", "STP Lodgement"],
    items: [
      "ABA exports rejected by bank (BATCH/PAYEE NAME/BSB validation).",
      "Super guarantee at 12% — OTE classification & backpay rules.",
      "STP error codes such as CMN.ATO.GEN.200001 and BRD.ATO mapping.",
      "Leave loading with overtime/allowances — correct tax/SG interactions.",
      "Award/Pay items setup, accrual and tax/super links.",
      "Period-end reconciliation: Activity vs Summary vs BAS.",
    ],
  },
  {
    title: "ADP Payforce",
    intro:
      "Comprehensive support for EFT rejections, leave accrual calculations, pay run processing, and TFN management.",
    tags: ["EFT Processing", "Leave Management", "Validation Errors"],
    items: [
      "EFT file generation & bank validations (amounts, account, padding/encoding).",
      "Annual/rolling leave accruals & interaction with pay runs.",
      "Pay-run troubleshooting & batch rollback.",
      "TFN/tax code updates with effective dating & backdating.",
      "STP Phase 2 field mapping, ABN/branch configuration.",
      "GL/Cost centre reporting exports.",
    ],
  },
  {
    title: "Chris21 (iChris)",
    intro:
      "Form access troubleshooting, security profiles, leave management, and system navigation support.",
    tags: ["Security Access", "Form Processing", "Leave Issues"],
    items: [
      "Security roles & access (form control, approvals).",
      "Form edits/submit/recall and history tracking.",
      "Leave accrual/entitlement changes, negative balance fixes.",
      "Employee master data sync; org/position changes.",
      "Reporting & audit logs.",
    ],
  },
  {
    title: "Dayforce",
    intro:
      "Login troubleshooting, paystub access, timesheet approvals, and system integration solutions.",
    tags: ["User Access", "Timesheet Issues", "System Integration"],
    items: [
      "SSO/MFA login issues & cache reset.",
      "Payslip access permissions & historical retrieval.",
      "Timesheet approval rules; resubmission windows.",
      "Integrations with HR/finance (APIs/import mapping).",
      "STP configuration & lodgement checks.",
    ],
  },
  {
    title: "Employment Hero",
    intro:
      "Pay run submissions, STP validation, employee onboarding, and compliance reporting guidance.",
    tags: ["Pay Run Processing", "STP Compliance", "Employee Setup"],
    items: [
      "Pay-run exceptions (duplicates/late/voids).",
      "STP Phase 2 validations and error remediation.",
      "Employee onboarding (TFN, tax, super choice, self-service).",
      "Operational/Compliance reporting exports.",
    ],
  },
  {
    title: "MicrOpay",
    intro:
      "STP submissions, tax year transitions, system updates, and decommissioning support.",
    tags: ["STP Lodgement", "Year End Processing", "System Updates"],
    items: [
      "STP lodgement & message responses; retry strategies.",
      "Financial year close (YTD carry forward & reconciliations).",
      "Known issues with upgrades/patches & pre-backup steps.",
      "Decommissioning (exports, archive & compliance retention).",
    ],
  },
];

const supportZH: SystemSupport[] = [
  {
    title: "Xero Payroll",
    intro:
      "涵盖 ABA 文件被拒、养老金（SG）缴纳、STP 报送、年假加载（Leave Loading）计算与 Award 规则问题的高频 FAQ。",
    tags: ["银行文件", "养老金合规", "STP 报送"],
    items: [
      "ABA 导出被银行拒收（批次/收款人名称/BSB 校验）。",
      "SG 上调至 12%：OTE 归类与追补规则。",
      "常见 STP 错误码（如 CMN.ATO.GEN.200001、BRD.ATO）与修复。",
      "Leave loading 与加班/津贴的税/养老金处理。",
      "Award/Pay item 设置、累计与税/养老金关联。",
      "期末对账：Activity vs Summary vs BAS。",
    ],
  },
  {
    title: "ADP Payforce",
    intro:
      "EFT 拒付、假期累计、Pay-run 处理与 TFN 管理的全套指引。",
    tags: ["EFT 处理", "休假管理", "校验错误"],
    items: [
      "EFT 文件生成与银行校验（金额、账号、填充/编码）。",
      "年假/滚动假累计与计薪交互。",
      "Pay-run 异常排查与批处理回滚。",
      "TFN/税码更新的生效期与追溯处理。",
      "STP 第二阶段字段映射、ABN/分部配置。",
      "GL/成本中心报表导出。",
    ],
  },
  {
    title: "Chris21（iChris）",
    intro:
      "表单访问、权限配置、休假管理与系统导航。",
    tags: ["安全与权限", "表单处理", "假期问题"],
    items: [
      "安全角色与访问控制（表单权限、审批路径）。",
      "表单编辑/提交/撤回与历史追踪。",
      "假期累计/额度调整、负余额修复。",
      "员工主数据同步、组织/职位变更。",
      "报表与审计日志。",
    ],
  },
  {
    title: "Dayforce",
    intro:
      "登录问题、工资单访问、工时单审批与系统集成。",
    tags: ["用户访问", "工时单问题", "系统集成"],
    items: [
      "SSO/MFA 登录排障与缓存清理。",
      "工资单权限与历史记录调用。",
      "Timesheet 审批规则与重提窗口。",
      "与 HR/财务系统集成（API/导入映射）。",
      "STP 配置与报送校验。",
    ],
  },
  {
    title: "Employment Hero",
    intro:
      "Pay-run 提交、STP 校验、入职办理与合规报表。",
    tags: ["薪资处理", "STP 合规", "员工建档"],
    items: [
      "Pay-run 异常（重复、滞纳、撤销）。",
      "STP 第二阶段校验与错误修复。",
      "入职（TFN/税码/养老金选择/自助注册）。",
      "运营与合规报表导出。",
    ],
  },
  {
    title: "MicrOpay",
    intro:
      "STP 报送、财年结转、系统更新与退役。",
    tags: ["STP 报送", "财年结转", "系统更新"],
    items: [
      "STP 报送与回执处理、失败重试。",
      "财年结转（YTD 结转与对账）。",
      "升级/补丁已知问题与备份建议。",
      "系统退役（导出、归档与法定留存）。",
    ],
  },
];

/* ======================
   I18N (chrome)
   ====================== */
const i18n = {
  en: {
    brand: "Signature Payroll",
    nav: {
      home: "Home",
      about: "About Us",
      services: "Services",
      success: "Success Stories",
      news: "News",
      testimonials: "Testimonials",
      partners: "Partners",
      resources: "Resources",
      recruitment: "Recruitment",
      contact: "Contact",
      privacy: "Privacy Policy",
      terms: "Terms of Use",
    },
    hero: {
      title: "Payroll done right — accurate, compliant, on time.",
      subtitle:
        "We design, run and optimise payroll for Australian organisations with bilingual support and audit-ready processes.",
      cards: [
        { title: "Accuracy", desc: "Robust checks and reconciliations." },
        { title: "Compliance", desc: "Fair Work, STP & Super ready." },
        { title: "Continuity", desc: "Senior consultants, accountable delivery." },
      ],
    },
    about: { heading: "About Signature Payroll", leadership: "Leadership Team" },
    services: { heading: "Our Services" },
    success: { heading: "Success Stories" },
    news: { heading: "Latest Industry News" },
    testimonials: { heading: "What Our Clients Say" },
    partners: { heading: "Partners (Color Logos)" },
    resources: { heading: "Resources & Support", support_title: "Payroll System Support" },
    recruitment: { heading: "Join Our Team", intro: "Explore open positions below." },
    contact: {
      heading: "Contact",
      intro: "Email admin@signaturepayroll.com.au or send us a message.",
      form: { name: "Name", email: "Email", message: "Message", submit: "Send" },
    },
    privacy: { heading: "Privacy Policy (Placeholder)", body: "Placeholder per Australian Privacy Principles." },
    terms: { heading: "Terms of Use (Placeholder)", body: "Use of this site implies lawful use only; general info only." },
    footer: { rights: "All rights reserved." },
    buttons: { expand: "View details", collapse: "Hide details" },
  },
  zh: {
    brand: "Signature Payroll",
    nav: {
      home: "首页",
      about: "关于我们",
      services: "服务",
      success: "成功案例",
      news: "新闻",
      testimonials: "客户证言",
      partners: "合作伙伴",
      resources: "资源",
      recruitment: "招聘",
      contact: "联系",
      privacy: "隐私政策",
      terms: "使用条款",
    },
    hero: {
      title: "严谨、合规、准时 —— 您值得信赖的薪资管理伙伴",
      subtitle:
        "为澳洲企业提供端到端薪资服务与优化，支持中英双语交付，流程审计随时可追溯。",
      cards: [
        { title: "准确性", desc: "严密核对与对账流程。" },
        { title: "合规性", desc: "完全符合 Fair Work、STP 与养老金要求。" },
        { title: "连续性", desc: "由资深顾问负责的稳定交付。" },
      ],
    },
    about: { heading: "关于 Signature Payroll", leadership: "管理团队" },
    services: { heading: "服务范围" },
    success: { heading: "成功案例" },
    news: { heading: "最新行业新闻" },
    testimonials: { heading: "客户怎么说" },
    partners: { heading: "合作伙伴（彩色 Logo）" },
    resources: { heading: "资源与支持", support_title: "薪资系统支持" },
    recruitment: { heading: "加入我们", intro: "欢迎浏览开放岗位并投递简历。" },
    contact: {
      heading: "联系",
      intro: "发送邮件至 admin@signaturepayroll.com.au，或在线留言。",
      form: { name: "姓名", email: "邮箱", message: "留言内容", submit: "发送" },
    },
    privacy: { heading: "隐私政策（占位）", body: "遵循澳大利亚隐私原则的占位文本。" },
    terms: { heading: "使用条款（占位）", body: "仅可依法使用本站；内容仅供一般信息参考。" },
    footer: { rights: "版权所有" },
    buttons: { expand: "查看常见问题", collapse: "收起" },
  },
};

/* ======================
   UI atoms
   ====================== */
const NavButton = ({ active, onClick, children }) => (
  <button
    onClick={onClick}
    className={`px-3 py-2 rounded-md text-sm font-medium transition ${
      active
        ? "bg-black text-white"
        : "bg-white text-black border border-gray-400 hover:bg-gray-200"
    }`}
  >
    {children}
  </button>
);

const Card = ({ children }) => (
  <div className="rounded-xl border border-gray-300 bg-white p-6 shadow-sm">{children}</div>
);

const Section = ({ title, children }) => (
  <section className="space-y-5">
    <h2 className="text-2xl font-semibold text-gray-900">{title}</h2>
    {children}
  </section>
);

/* ======================
   Page
   ====================== */
export default function SignaturePayrollSite() {
  const [lang, setLang] = useState<"en" | "zh">("zh");
  const [route, setRoute] = useState("home");
  const [testimonialPage, setTestimonialPage] = useState(0); // 6 per page
  const [expanded, setExpanded] = useState<number | null>(null); // for support cards
  const t = useMemo(() => i18n[lang], [lang]);

  const ABOUT = lang === "en" ? aboutEN : aboutZH;
  const LEADS = lang === "en" ? leadershipEN : leadershipZH;
  const SERVICES = lang === "en" ? servicesEN : servicesZH;
  const STORIES = lang === "en" ? successEN : successZH;
  const NEWS = lang === "en" ? newsEN : newsZH;
  const TESTIMONIALS = lang === "en" ? testimonialsEN : testimonialsZH;
  const JOBS = lang === "en" ? jobsEN : jobsZH;
  const SUPPORT = lang === "en" ? supportEN : supportZH;

  const pagedTestimonials = TESTIMONIALS.slice(testimonialPage * 6, testimonialPage * 6 + 6);
  const totalTestimonialPages = Math.ceil(TESTIMONIALS.length / 6);

  const logoSrc = (file: string) => `/photos/Photos/${encodeURI(file)}`;

  return (
    <div className="min-h-screen bg-gray-100 text-gray-900">
      {/* Header */}
      <header className="mx-auto max-w-7xl px-4 pt-6 flex items-center justify-between">
        <span className="text-lg font-semibold">{t.brand}</span>
        <button
          onClick={() => setLang(lang === "en" ? "zh" : "en")}
          className="bg-black text-white px-3 py-2 rounded-md text-xs font-medium"
        >
          {lang === "en" ? "中文" : "EN"}
        </button>
      </header>

      {/* Nav */}
      <nav className="mx-auto max-w-7xl px-4 mt-4 flex flex-wrap gap-2">
        {["home","about","services","success","news","testimonials","partners","resources","recruitment","contact","privacy","terms"].map((key) => (
          <NavButton key={key} active={route===key} onClick={()=>setRoute(key)}>
            {t.nav[key]}
          </NavButton>
        ))}
      </nav>

      {/* Main */}
      <main className="mx-auto max-w-7xl px-4 py-10 space-y-10">
        {/* Home */}
        {route==="home" && (
          <Section title={t.hero.title}>
            <p>{t.hero.subtitle}</p>
            <div className="grid md:grid-cols-3 gap-4 mt-6">
              {t.hero.cards.map((c, i)=>(
                <Card key={i}>
                  <h3 className="font-semibold">{c.title}</h3>
                  <p className="text-gray-600">{c.desc}</p>
                </Card>
              ))}
            </div>
          </Section>
        )}

        {/* About + Leadership */}
        {route==="about" && (
          <Section title={t.about.heading}>
            {ABOUT.map((p,i)=><p key={i}>{p}</p>)}
            <h3 className="text-xl font-semibold mt-6">{t.about.leadership}</h3>
            <div className="grid md:grid-cols-2 gap-4 mt-2">
              {LEADS.map((m,i)=>(
                <Card key={i}>
                  <div className="text-lg font-semibold">{m.name}</div>
                  <div className="text-sm text-gray-700 italic">{m.title}</div>
                  <p className="mt-2">{m.blurb}</p>
                </Card>
              ))}
            </div>
          </Section>
        )}

        {/* Services */}
        {route==="services" && (
          <Section title={t.services.heading}>
            <div className="grid md:grid-cols-3 gap-6">
              {SERVICES.map((s,i)=>(
                <Card key={i}>
                  <div className="text-center">
                    <h3 className="text-2xl font-bold leading-tight">{s.title}</h3>
                    <p className="text-blue-700 font-semibold mt-2">{s.subtitle}</p>
                  </div>
                  <ul className="mt-4 space-y-2">
                    {s.bullets.map((b,j)=>(
                      <li key={j} className="flex items-start gap-2">
                        <span className="mt-1">✓</span><span>{b}</span>
                      </li>
                    ))}
                  </ul>
                </Card>
              ))}
            </div>
          </Section>
        )}

        {/* Success Stories */}
        {route==="success" && (
          <Section title={t.success.heading}>
            <div className="grid md:grid-cols-2 gap-6">
              {STORIES.map((st,i)=>(
                <Card key={i}>
                  <h3 className="text-2xl font-bold">{st.title}</h3>
                  <p className="mt-3 text-gray-700">{st.summary}</p>
                  {st.metrics && (
                    <div className="grid grid-cols-3 gap-3 mt-5">
                      {st.metrics.map((m, k)=>(
                        <div key={k} className="bg-gray-50 rounded-lg p-3 text-center border border-gray-200">
                          <div className="text-xl font-bold">{m.value}</div>
                          <div className="text-xs text-gray-600">{m.label}</div>
                        </div>
                      ))}
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </Section>
        )}

        {/* News */}
        {route==="news" && (
          <Section title={t.news.heading}>
            <div className="grid md:grid-cols-2 gap-6">
              {NEWS.map((n,i)=>(
                <Card key={i}>
                  <div className="text-sm text-gray-500">{n.date} • {n.tag}</div>
                  <h3 className="text-xl font-semibold mt-2">{n.title}</h3>
                  <p className="mt-2 text-gray-700">{n.summary}</p>
                  {n.bullets && (
                    <ul className="mt-3 space-y-2">
                      {n.bullets.map((b,j)=>(
                        <li key={j} className="flex items-start gap-2">
                          <span className="mt-1">→</span><span>{b}</span>
                        </li>
                      ))}
                    </ul>
                  )}
                </Card>
              ))}
            </div>
          </Section>
        )}

        {/* Testimonials — 6 per page */}
        {route==="testimonials" && (
          <Section title={t.testimonials.heading}>
            <div className="grid md:grid-cols-3 gap-5">
              {pagedTestimonials.map((ts,i)=>(
                <Card key={i}>
                  <blockquote className="italic text-gray-800">“{ts.quote}”</blockquote>
                  <div className="mt-3 font-semibold text-blue-700">{ts.source}</div>
                </Card>
              ))}
            </div>
            {totalTestimonialPages>1 && (
              <div className="flex items-center justify-center gap-2 mt-5">
                <button className="bg-black text-white px-3 py-2 rounded-md disabled:opacity-40"
                  disabled={testimonialPage===0}
                  onClick={()=>setTestimonialPage(p=>Math.max(0,p-1))}>
                  {lang==="en" ? "Prev" : "上一页"}
                </button>
                <span className="text-sm">{testimonialPage+1} / {totalTestimonialPages}</span>
                <button className="bg-black text-white px-3 py-2 rounded-md disabled:opacity-40"
                  disabled={testimonialPage>=totalTestimonialPages-1}
                  onClick={()=>setTestimonialPage(p=>Math.min(totalTestimonialPages-1,p+1))}>
                  {lang==="en" ? "Next" : "下一页"}
                </button>
              </div>
            )}
          </Section>
        )}

        {/* Partners — logos with URL-encoded src */}
        {route==="partners" && (
          <Section title={t.partners.heading}>
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
              {partnerFiles.map((file, i)=>(
                <div key={i} className="bg-white border border-gray-300 rounded-md p-3 flex items-center justify-center h-28">
                  <img
                    src={logoSrc(file)}
                    alt={`Partner ${i+1}`}
                    className="max-h-20 object-contain"
                    onError={(e)=>{
                      const el = e.currentTarget as HTMLImageElement;
                      const box = el.parentElement!;
                      el.style.display="none";
                      const tag = document.createElement("div");
                      tag.className="text-xs text-gray-600 text-center";
                      tag.innerText = file;
                      box.appendChild(tag);
                    }}
                  />
                </div>
              ))}
            </div>
            <p className="text-xs text-gray-500 mt-2">
              若仍不可见，请将 <code>photos/</code> 放到静态公开目录（如 <code>/public/photos</code>），并保持路径 <code>/photos/Photos/&lt;filename&gt;</code>。
            </p>
          </Section>
        )}

        {/* Resources — Payroll System Support */}
        {route==="resources" && (
          <>
            <Section title={t.resources.heading}>
              <p className="text-gray-700">
                {lang==="en"
                  ? "Guides, FAQs and best practices for payroll operations. See the system-specific support below."
                  : "薪资运营的指南、FAQ 与最佳实践。以下为不同系统的支持指引。"}
              </p>
            </Section>

            <Section title={t.resources.support_title}>
              <div className="grid md:grid-cols-3 gap-6">
                {SUPPORT.map((s, idx)=>(
                  <Card key={idx}>
                    <h3 className="text-xl font-semibold">{s.title}</h3>
                    <p className="mt-2 text-gray-700">{s.intro}</p>
                    <div className="flex flex-wrap gap-2 mt-3">
                      {s.tags.map((tag,i)=>(
                        <span key={i} className="px-3 py-1 text-xs rounded-full bg-blue-50 text-blue-700 border border-blue-100">
                          {tag}
                        </span>
                      ))}
                    </div>
                    <button
                      className="mt-4 text-sm bg-black text-white px-3 py-2 rounded-md"
                      onClick={()=>setExpanded(expanded===idx?null:idx)}
                    >
                      {expanded===idx ? t.buttons.collapse : t.buttons.expand}
                    </button>
                    {expanded===idx && (
                      <ul className="mt-3 list-disc pl-5 space-y-1">
                        {s.items.map((it,i)=><li key={i}>{it}</li>)}
                      </ul>
                    )}
                  </Card>
                ))}
              </div>
            </Section>
          </>
        )}

        {/* Recruitment */}
        {route==="recruitment" && (
          <Section title={t.recruitment.heading}>
            <p>{t.recruitment.intro}</p>
            <ul className="mt-3 space-y-2">
              {(JOBS).map((j,i)=>(
                <li key={i}><strong>{j.role}</strong> ({j.type}) — {j.desc}</li>
              ))}
            </ul>
          </Section>
        )}

        {/* Contact / Privacy / Terms */}
        {route==="contact" && (
          <Section title={t.contact.heading}>
            <p>{t.contact.intro}</p>
            <form className="space-y-2 mt-4">
              <input placeholder={t.contact.form.name} className="border p-2 w-full bg-white"/>
              <input placeholder={t.contact.form.email} className="border p-2 w-full bg-white"/>
              <textarea placeholder={t.contact.form.message} className="border p-2 w-full bg-white"/>
              <button className="bg-black text-white px-4 py-2 rounded-md">{t.contact.form.submit}</button>
            </form>
          </Section>
        )}
        {route==="privacy" && (
          <Section title={t.privacy.heading}><p>{t.privacy.body}</p></Section>
        )}
        {route==="terms" && (
          <Section title={t.terms.heading}><p>{t.terms.body}</p></Section>
        )}
      </main>

      {/* Footer */}
      <footer className="border-t border-gray-300 bg-white">
        <div className="mx-auto max-w-7xl px-4 py-8 text-sm text-gray-600 flex justify-between">
          <span>{t.brand} © {new Date().getFullYear()} {t.footer.rights}</span>
        </div>
      </footer>
    </div>
  );
}

